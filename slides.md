---
# try also 'default' to start simple
theme: penguin
colorSchema: light
themeConfig:
  logoHeader: https://res.cloudinary.com/alvarosaburido/image/upload/v1666359605/as-portfolio/Pixel_Avatar_lhbjva.png
  eventLogo: 'data:image/png;base64,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'
  eventUrl: 'https://www.wearedevelopers.com/event/vue-js-day-february-2023'
  twitter: '@alvarosabu'
  twitterUrl: 'https://twitter.com/alvarosabu'
# https://sli.dev/custom/highlighters.html
highlighter: shiki
# show line numbers in code blocks
lineNumbers: false
css: unocss
layout: intro
drawings:
  persist: false
---

# TresJS ‚ñ≤ ‚ñ† ‚óè

## A declarative way of using ThreeJS as Vue components

---
layout: presenter
twitter: '@alvarosabu'
twitterUrl: https://twitter.com/alvarosabu
presenterImage: https://res.cloudinary.com/alvarosaburido/image/upload/v1673193768/the-astronaut-color_el2jle.png
---

# Alvaro Saburido

DevRel Engineer at <a href="https://www.storyblok.com/"><logos-storyblok-icon /> Storyblok</a>

- Barcelona, Spain üáªüá™ üá™üá∏
- I often write at <a href="https://dev.to/alvarosaburido"> dev.to/@alvarosabu</a>
- Creating content on <a href="https://www.youtube.com/channel/AlvaroDevLabs" ><logos-youtube-icon mr-1 />AlvaroDevLabs</a>
- Blog & Portfolio <a href="https://alvarosaburido.dev">alvarosaburido.dev</a>
- Say hi at <a href="https://twitter.com/alvarosabu"><logos-twitter mr-1 />@alvarosabu</a>
- <a href="https://elk.zone/mas.to/@alvarosabu">@alvarosabu@mas.to</a>

---

<EmbedExperiment width="860" height="450"  src="https://playground.tresjs.org/vue/portal-journey/"  />



---

# What if I told you...

```vue
<script setup lang="ts">
import { OrbitControls } from '@tresjs/cientos'
import ThePortal from './ThePortal.vue'
import TheFireFlies from './TheFireFlies.vue'
</script>

<template>
  <TresCanvas clear-color="#201919" shadows alpha >
    <OrbitControls />
    <TresPerspectiveCamera :position="[5, 5, 5]" :fov="45" :aspect="1" :near="0.1" :far="1000" />
    <TresScene>
      <TresFog :args="['#201919', 0.1, 75]" />
      <ThePortal />
      <TheFireFlies />
      <TresAmbientLight :position="[10, 10, 10]" :intensity="1.5" color="#00ff00" />
    </TresScene>
  </TresCanvas>
</template>
```



---
layout: two-cols
---

# TresJS

Is a Vue library that allows you to create 3D scenes **declaratively** by using ThreeJS as Vue components.

Tres (Spanish üá™üá∏ word for "three", pronounced `/tres/` ) in reference to the **ThreeJS library**. I'm latin and the french word was already used for another library ü•∏.

::right::

<LoveVueThreeJS />

---
layout: text-image
media: /threejs-journey.png

---

# Motivation

ThreeJS is a wonderfull library to create awesome **WebGL 3D websites**. Is also a constantly updated library that makes hard for wrapper mantainers like **TroisJS** to keep up with all the enhancements.

---
layout: text-image
media: https://docs.pmnd.rs/_next/static/media/react-three-fiber.f038c399.jpg

---

# React-three-fiber

React-three-fiber is a **custom React renderer for three.js**. Is made by **pmndrs** and is a very popular library for React developers.

I played with it while doing Bruno's [Simon ThreeJS Journey course](https://threejs-journey.com/) and I really liked the declarative way of creating 3D scenes.

---
layout: two-cols
---

# Vue threejs 

In my search for something similar in the VueJS ecosystem, I found this amazing library called [Lunchbox](https://lunchboxjs.com/) which works with the same concept that R3F, it provides a custom Vue3 Renderer.

The only problem is, mixing different renderers in Vue 3 is something the Vue community is still working on - see here for more information.

Until there is a solution similar to React Reconciliation you will need to create 2 separate Apps which might be not ideal.

::right::

```ts
// Example Vite setup
import { createApp } from 'vue'
import { createApp as createLunchboxApp } from 'lunchboxjs'
import App from './App.vue'
import LunchboxApp from './LunchboxApp.vue'

// html app
const app = createApp(App)
app.mount('#app')

// lunchbox app
const lunchboxApp = createLunchboxApp(LunchboxApp)
// assuming there's an element with ID `lunchbox` in your HTML app
lunchboxApp.mount('#lunchbox')

```

---
layout: text-image
media: /conversation.png
---

# Inspiration

So I was inspired by both libraries to create something that wouldn't require creating a custom renderer.

Intelligent enough to generate Vue components based on the ThreeJS constructors with 0-to-none manteinance using  `three:latest`. 

Special mention to [0xca0a](https://twitter.com/0xca0a) to spark the idea on a conversation we had on Twitter.



That's TresJS.

---
layout: text-image
media: https://media.giphy.com/media/GgcusW5RLS9Nu/giphy.gif
---

# The Challenge


- Up to date with ThreeJS with low maintenance üòÉ
- No custom renderer üßê
- Performant even with reactivity ‚ö°Ô∏è
- Verbose and easy to use ü§ì

---
layout: two-cols
---

# Getting started

```bash
pnpm add @tresjs/core three -D
```

or play with it on [Stackblitz](https://stackblitz.com/edit/tresjs-basic?file=README.md)

::right::

<EmbedExperiment width="400" height="450" src="https://playground.tresjs.org/vue/basic?info=false" />


---


# Plugin


```ts
import Tres from '@tresjs/core'

const app = createApp(App)
app.use(Tres, {
  // options
})
app.mount('#app')

```

---
layout: two-cols
---

# Setting up the Canvas

Before we can create an Scene, we need a DOM element to render it to.

With **TresJS** you only need to add the default component `<TresCanvas />` to the template of your Vue component.

::right::

```html
<template>
  <TresCanvas> 
    // Your scene is going to live here
  </TresCanvas>
</template>
```

<Warning>
It's important that all components related to the scene live between the <b>TresCanvas</b> component. 

</Warning>
---
layout: two-cols
---

# Setting up the Scene

![](/scene-diagram.png)


::right::

Every 3D experience needs at least the following components:

- Objects
- A **Camera** to see the objects
- An **Scene** to put all together
- A **Renderer** to render it to the canvas (DOM)

---
layout: two-cols
---

# Setting up the Scene

So if you were using plain ThreeJS you would need to do something like this:

```ts
const scene = new THREE.Scene()
const camera = new THREE.PerspectiveCamera()

const renderer = new THREE.WebGLRenderer({
  canvas: _canvas,
})

renderer.render(scene, camera)
```
---
layout: two-cols
---

# Da TresJS way ü§ì

```html
<template>
  <TresCanvas>
    <TresPerspectiveCamera />
    <TresScene>
      // All your objects live here
    </TresScene>
  </TresCanvas>
</template>
```

::right::

Notice that we added a `<TresPerspectiveCamera />` and a `<TresScene />` component. Thats because they are the bare minimum to create a [`WebGLRenderer`](https://threejs.org/docs/#api/en/renderers/WebGLRenderer)

```ts
const renderer = new THREE.WebGLRenderer({
  canvas: _canvas,
})

renderer.render(scene, camera)
```

---

# Adding an Object

If we where using plain ThreeJS:

```ts
const geometry = new THREE.TorusGeometry(1, 0.5, 16, 32)

const material = 
  new THREE.MeshBasicMaterial({ color: 'orange' })

const donut = new THREE.Mesh(geometry, material)
scene.add(donut)
```

---
layout: two-cols
---

# Adding an Object

With TresJS:

```html
<TresCanvas>
  <TresPerspectiveCamera />
  <TresScene>
    <TresMesh />
      <TresTorusGeometry :args="[1, 0.5, 16, 32]" />
      <TresMeshBasicMaterial color="orange" />
    <TresMesh />
  </TresScene>
</TresCanvas>
```
::right::

<v-click>

![](https://media.giphy.com/media/ck5JRWob7folZ7d97I/giphy.gif)

Say what??? ü§Ø

</v-click>


---

# From ThreeJS Instances to Components

<div class="grid grid-cols-3 w-full">
  <img src="/three-latest.png"/>
  <img src="/magic.png" v-click />
  <img src="/vue-components.png" v-click />
</div>

--- 
layout: two-cols
---

# Arguments

```html
<TresPerspectiveCamera 
  :args="[45, width/ height, 1, 1000]"
/>
```

::right::

<br />
<br />



<v-click>
```ts
const camera = 
  new PerspectiveCamera(45, width/ height, 1, 1000)

scene.add(camera)
```
</v-click>

---
layout: two-cols
---

# Props

```html
<TresPerspectiveCamera 
  :fov="45"
  :aspect="width/ height"
  :near="1"
  :far="1000"
/>
```

::right::

<br />
<br />



<v-click>
```ts
const camera = 
  new PerspectiveCamera()

camera.fov = 45
camera.aspect = width/ height
camera.near = 1
camera.far = 1000

scene.add(camera)
```
</v-click>

---
layout: two-cols
---

# Slots

```html
<TresMesh >
  <TresTorusGeometry :args="[1, 0.5, 16, 32]" />
  <TresMeshBasicMaterial color="orange" />
</TresMesh>
```

::right::

<br />
<br />


<v-click>
```ts
const geometry = 
  new TorusGeometry(1, 0.5, 16, 32)

const material = 
  new MeshBasicMaterial({ color: 'orange' })

const donut = new Mesh(geometry, material)
// same as donut.geometry = geometry and
// donut.material = material
scene.add(donut)
```

</v-click>

---
layout: two-cols
---

# Re-use

```html
// components/OrangeTorus.vue
<template>
  <TresMesh >
    <TresTorusGeometry :args="[1, 0.5, 16, 32]" />
    <TresMeshBasicMaterial color="orange" />
  </TresMesh>
</template>
```

::right::

<br />
<br />


<v-click>

```html
// Parent component
<template>
  <TresCanvas>
    <TresPerspectiveCamera />
    <TresScene>
      <OrangeTorus />
    </TresScene>
  </TresCanvas>
</template>
```

</v-click>


---
layout: two-cols
---

# Challenges

With this theorically you can create any ThreeJS scene with TresJS and

- Keep Up to date with ThreeJS  ‚òëÔ∏è 
- Verbose and easy to use  ‚òëÔ∏è

::right::

<EmbedExperiment width="400" height="250" src="https://playground.tresjs.org/vue/tres-donut/" />

---
layout: two-cols
---

# Let's try something more complex

<EmbedExperiment width="400" height="250" src="https://playground.tresjs.org/vue/animations/" />

::right::

<v-click>

```html
<template>
  <TresMesh>
    <TresBoxGeometry :args="[1, 1, 1]" />
    <TresMeshNormalMaterial />
  </TresMesh>
</template>
```

</v-click>

---
layout: two-cols
---

# The Loop

![](/render-loop.png)

::right::

```ts
const loop = () => {

  // Move object
  cube.position.x += 0.01
  
  renderer.render( scene, camera );
  requestAnimationFrame(loop)
}

loop()
```

![](/frames-per-second-diagram.png)

---
layout: two-cols
---

# useRenderLoop composable

```ts
const boxRef: ShallowRef<TresInstance | null> = shallowRef(null);

const { onLoop } = useRenderLoop();

onLoop(({ delta, elapsed }) => {
  if (boxRef.value) {
    boxRef.value.rotation.y += delta;
    boxRef.value.rotation.z = elapsed * 0.2;
  }
});
```


::right::

<EmbedExperiment width="400" height="250" src="https://playground.tresjs.org/vue/animations/" />

---
layout: two-cols
---

# OrbitControls

`OrbitControls` is a camera controller that allows you to orbit around a target. It's a great way to explore your scene.

However, it is not part of the core of ThreeJS. So to use it you would need to import it from the `three/examples/jsm/controls/OrbitControls` module. üßê

::right::

<EmbedExperiment width="400" height="250" src="https://playground.tresjs.org/vue/gltf-model/" />

---

![](/wtf.gif)

---
layout: two-cols
---

# Way # 1

Fortunately, `TresJS` provides a way to extend the catalog of components. You can do it by using the extend method using the `useCatalogue` composable.

<v-click>

```ts
import { extend } from 'three'

import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'

extend({ OrbitControls })
```

</v-click>

::right::

<v-click>

```html
<TresScene>
  <TresOrbitControls 
    :camera="camera" :renderer="renderer.domElement" 
  />
</TresScene>
```

But wait a minute, where do we get the `camera` or `renderer`?. ü§î

</v-click>

--- 
layout: two-cols
---

# useTres composable

With the `useTres` composable you can access the `camera` and `renderer` from any component in your scene ‚ò∫Ô∏è.

```ts
import { useTres } from '@tresjs/core'

const { camera, renderer } = useTres()
```

::right::
<v-click>

```html
<TresScene>
  <TresOrbitControls 
    :camera="camera" :renderer="renderer.domElement" 
  />
</TresScene>
```

</v-click>

---

# Way # 2

<v-click>

 We will need to wait a little bit forward the presentation to see this one. ü§ì


</v-click>

<v-click>

![](https://media.giphy.com/media/hC4ivYEwCLHCU/giphy.gif)

</v-click>

---

# Materials

<EmbedExperiment class="z-10" width="860" height="350"  src="https://playground.tresjs.org/vue/materials/"  />

---
layout: two-cols
---

# Textures

3D textures are images that contain multiple layers of data, allowing them to represent volume or simulate three-dimensional structures.

TresJS provides a way to load textures using the `useTexture` composable.

```ts
import { useTexture } from '@tresjs/core'

const pbrTexture = await useTexture({
  map: '/textures/black-rock/Rock035_2K_Displacement.jpg',
  displacementMap: '/textures/black-rock/Rock035_2K_Displacement.jpg',
  roughnessMap: '/textures/black-rock/Rock035_2K_Roughness.jpg',
  normalMap: '/textures/black-rock/Rock035_2K_NormalDX.jpg',
  ambientOcclusion: '/textures/black-rock/Rock035_2K_AmbientOcclusion.jpg',
})
```

::right::

![](/TextureTypes1.png)

---
layout: two-cols
---

# Textures

![](/TextureTypes2.png)

::right::

```html

<TresMesh>
  <TresSphereGeometry :args="[1,32,32]" />
  <TresMeshStandardMaterial
    :map="pbrTexture.map"
    :displacementMap="pbrTexture.displacementMap"
    :roughnessMap="pbrTexture.roughnessMap"
    :normalMap="pbrTexture.normalMap"
    :ambientOcclusionMap="pbrTexture.ambientOcclusionMap"
  />
</TresMesh>
```

<Warning>
The component using `await useTexture` must be inside a `Suspense` component.

</Warning>


---

# Textures

<EmbedExperiment class="z-10" width="860" height="350"  src="https://playground.tresjs.org/vue/textures/"  />

---
layout: two-cols
---

# Lights üí° 

> The substance of painting is light.
> -
> *Andre Derain*, co-founder of Fauvism

::right::

![](/render-v2.png)

- Light is a fundamental part of the 3D scene.
- Builds a sense of perspective and depth.
- Creates shadows and reflections.
- Light is color.


--- 
layout: two-cols
---
# Lights üí° 
![types of light](/types-of-light.png)

::right::

<v-click>

![](https://media.giphy.com/media/xTiN0x8n9m0C7nfYPu/giphy.gif)

</v-click>

--- 
layout: two-cols
---
# Lights üí°

## AmbientLight

```html
<TresAmbientLight 
  :args="[0xffffff, 0.5]" 
/>
// color, intensity
```

::right::

## DirectionalLight

```html
<TresDirectionalLight
  ref="directionalLightRef
  :args="[0xffffff, 0.5]" 
/>
// Helper
<TresDirectionalLightHelper
  v-if="directionalLightRef"
  :args="[directionalLightRef, 5]"
/>
```

---

<EmbedExperiment class="z-10" width="860" height="450"  src="https://playground.tresjs.org/vue/lights/"  />

---

<div class="w-2/3">

![](/no-shadows.png)

</div>
---
layout: two-cols
---

# Shadows 

> Shadow is the means by which bodies display their form.
> -
> *Leonardo da Vinci, VueJS Developer*

::right::

![](/leonardo.png)

---
layout: two-cols
---

# Enable Shadows

First, we need to tell the `renderer` to enable shadows.


```html
<TresCanvas shadows>
</TresCanvas>
```

::right::

<v-click>

Then, we need to tell the `light` to cast shadows.

```html
<TresDirectionalLight
  castShadow
  :args="[0xffffff, 0.5]"
/>
```

</v-click>

<v-click>

![](/no-shadows.png)

</v-click>

---
layout: two-cols
---

# Cast shadows

Now we need to define which objects will cast shadows.

```html
<TresMesh :position="[2, -2, 0]" cast-shadow>
  <TresSphereGeometry />
  <TresMeshToonMaterial color="#FBB03B" />
</TresMesh>
```

<v-click>

And which objects will receive shadows.

```html
<TresMesh receive-shadow>
  <TresPlaneGeometry :args="[10, 10]" />
  <TresMeshToonMaterial color="#888" />
</TresMesh>
```

</v-click>

::right::

<v-click>

![](/cast-shadow.png)

</v-click>

---

<EmbedExperiment class="z-10" width="860" height="450"  src="https://playground.tresjs.org/vue/shadows/"  />

---
layout: two-cols
---

# Environment Tweaks

```html
<TresCanvas
  alpha
  shadows
  clear-color="#82DBC5"
  physically-correct-lights
  shadow-map-type="PCFSoftShadowMap"
  output-encoding="sRGBEncoding"
  tone-mapping="ReinhardToneMapping"
>
</TresCanvas>
```

---


<EmbedExperiment class="z-10" width="800" height="450"  src="https://playground.tresjs.org/vue/enviroment/"  />

---
layout: two-cols
---

# Events

**TresJS** Mesh objects emit pointer events when they are interacted with using `raycaster` and `pointer` objects under the hood.

```html
<TresMesh
  @click="(ev) => console.log('click', ev)"
  @pointer-move="(ev) => console.log('click', ev)"
  @pointer-enter="(ev) => console.log('click', ev)"
  @pointer-leave="(ev) => console.log('click', ev)"
/>
```

::right::

<EmbedExperiment class="z-10" width="400" height="250"  src="https://playground.tresjs.org/vue/events/"  />

---
layout: two-cols
---

# Models

**TresJS** supports loading models from `.gltf`, `.glb` and `.fbx` files (More formats planned).

There are **3** ways to load models:

- Using the `useLoader` composable.
- Using the `useGLTF` composable from `cientos`
- Using the `GLTFModel` component from `cientos`

::right::

<EmbedExperiment class="z-10" width="400" height="250"  src="https://playground.tresjs.org/vue/gltf-model/"  />

---

# Wait, what is cientos?

<div class="w-2/3">

![](https://media.giphy.com/media/ji6zzUZwNIuLS/giphy.gif)

</div>

---
layout: text-image
media: /cientos.png
---

# Cientos package

Cientos (Spanish word for "hundreds", pronounced `/Œ∏jentos/` ) is a collection of useful ready-to-go abstractions and components that are not part of the core package

```bash
npm install @tresjs/cientos -D
```

--- 

# You got it? Tres-cientos --> Three hundred

![](https://media.giphy.com/media/UWERvU4Nzn1ExkPKTx/giphy.gif)

---
layout: two-cols
---

# Cientos package

![cientos](/cientos.png)

::right::

```
@trejs/cientos/
‚îú‚îÄ‚îÄ Abstractions/
‚îÇ   ‚îú‚îÄ‚îÄ Text3D
‚îÇ   ‚îî‚îÄ‚îÄ useAnimations
‚îú‚îÄ‚îÄ Controls/
‚îÇ   ‚îú‚îÄ‚îÄ OrbitControls
‚îÇ   ‚îî‚îÄ‚îÄ TransformControls
‚îú‚îÄ‚îÄ Loaders/
‚îÇ   ‚îú‚îÄ‚îÄ useLTF
‚îÇ   ‚îú‚îÄ‚îÄ GLTFModel
‚îÇ   ‚îú‚îÄ‚îÄ useFBX
‚îÇ   ‚îî‚îÄ‚îÄ FBXModel
‚îú‚îÄ‚îÄ Shapes/
‚îÇ   ‚îî‚îÄ‚îÄ Plane
‚îî‚îÄ‚îÄ Misc/
    ‚îî‚îÄ‚îÄ useTweakPane
```
---


# Way # 2

We will need to wait a little bit forward the presentation to see this one. ü§ì

![](https://media.giphy.com/media/hC4ivYEwCLHCU/giphy.gif)

---
layout: two-cols
---
# Way # 2

```vue
<script setup>
import { OrbitControls } from '@tresjs/cientos'
</script>

<template>
  <TresCanvas>
    <OrbitControls />
  </TresCanvas>
</template>
```

::right::

<v-click>

![](https://media.giphy.com/media/glvyCVWYJ21fq/giphy-downsized-large.gif)

</v-click>

--- 
layout: two-cols
---
# Another Example

Using only `@tresjs/core`

```html
<TresMesh :rotation="[-Math.PI / 2, 0, 0]">
  <TresPlaneGeometry :args="[10,10]" />
  <TresMeshToonMaterial color="#FBB03B" />
</TresMesh>
```

::right::

<v-click>

Using `@tresjs/cientos`

```html
<Plane :args="[10,10]">
  <TresMeshToonMaterial color="#FBB03B" />
</Plane>
```

</v-click>

<v-click>

![](pacha.jpeg)

</v-click>

---
layout: two-cols
---

# useLoader

The `useLoader` composable allows you to pass any type of Three.js loader and a URL to load the resource from

```ts
import { useLoader } from '@tresjs/core'
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'

const { scene } = 
  await useLoader(GLTFLoader, '/models/AkuAku.gltf')
```

::right::

<v-click>

```html
<template>
  <TresCanvas>
    <TresScene>
      <TresMesh v-bind="scene" />
    </TresScene>
  </TresCanvas>
</template>
```

</v-click>

---
layout: two-cols
---

# useGLTF

The `useGLTF` composable is a wrapper around `useLoader` available on `cientos` üì¶ that allows you to load `.gltf` and `.glb` files.

```ts
import { useGLTF } from '@tresjs/cientos'

const { scene } = 
  await useGLTF('/models/AkuAku.gltf', { draco: true})
```

::right::

<v-click>

```html
<template>
  <TresCanvas>
    <TresScene>
      <TresMesh v-bind="scene" />
    </TresScene>
  </TresCanvas>
</template>
```

</v-click>

---
layout: two-cols
---

# GLTFModel

The `GLTFModel` component is a wrapper around `useGLTF` from `cientos` üì¶

```html
<GLTFModel ref="modelRef" src="/models/AkuAku.gltf" draco />
```

::right::

<v-click>

You can get the reference to the model using a [Template Ref](https://v3.vuejs.org/guide/component-template-refs.html)

```ts
<script setup lang="ts">
import { OrbitControls, GLTFModel } from '@tresjs/cientos'

const modelRef = shallowRef<THREE.Object3D>()

watch(modelRef, ({getModel}) => {
  const model = getModel()
  model.traverse((child) => {
    if (child.isMesh) {
      child.castShadow = true
      child.receiveShadow = true
    }
  })
})
</script>
```

</v-click>

---
layout: two-cols
---
# useTweakPane


The `useTweakPane` composable allows you to create a [Tweakpane](https://cocopon.github.io/tweakpane/) instance and add parameters to it.

```ts
import { useTweakPane } from '@tresjs/cientos'

const { pane } = useTweakPane()

pane.addInput(state, 'clearColor', {
  label: 'Background Color',
  colorMode: 'hex',
})

pane.addInput(state, 'shadows', {
  label: 'Shadows',
})
pane.addInput(state, 'physicallyCorrectLights', {
  label: 'physicallyCorrectLights',
})
```

::right::

![](/public/tweakpane.png)

---

# TresJS EcoSystem üå≥

<div class="w-2/3">

![](/tresjs-ecosystem.png)

</div>

---
layout: two-cols
---

# Caveats üò¨

- **HMR**, TresJS uses [Vite](https://vitejs.dev/) under the hood, but we are struggling to correctly dispose scenes and objects with HMR. We are working on it.
- **TresJS is a wrapper around Three.js**, so you need to be mindfull about **reactivity**. For example, if you want to change the position of a mesh, you need to use a `ref` and update the value of the `position` property instead via `props`

::right::

```ts
const boxRef = shallowRef(null);

const { onLoop } = useRenderLoop();

onLoop(({ delta, elapsed }) => {
  if (boxRef.value) {
    boxRef.value.rotation.y += delta;
    boxRef.value.rotation.z = elapsed * 0.2;
  }
});
```

---

# Roadmap

![Roadmap](/roadmap-2023.png)
---

## Contributors

<TheContributors />